<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://flashexpress.com/favicon.ico" type="image/x-icon">
  <title>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô | Flash Express</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: "Prompt", sans-serif;
      background-color: #fffbea;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    header {
      background-color: #ffeb3b;
      padding: 14px 20px;
      font-weight: bold;
      font-size: 20px;
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .container {
      padding: 20px;
      max-width: 450px;
      margin: auto;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      margin: 20px auto;
      padding: 20px;
      text-align: left;
    }

    .card h3 {
      text-align: center;
      color: purple;
      margin-top: 0;
    }

    .info p { margin: 8px 0; }

    input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 3px;
      box-sizing: border-box;
    }

    button {
      display: block;
      margin: 15px auto;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      cursor: pointer;
      transition: 0.2s;
    }

    button.save-btn {
      background: #4CAF50;
      color: white;
      width: 80%;
      max-width: 250px;
    }

    button#editBtn {
      background: #ffeb3b;
      color: #000;
      font-weight: bold;
      width: 80%;
      max-width: 250px;
    }

    button:hover { transform: scale(0.97); }

    a {
      display: block;
      margin-top: 10px;
      color: purple;
      text-decoration: none;
      font-size: 14px;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      border-top: 1px solid #ddd;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      font-size: 12px;
      box-shadow: 0 -2px 4px rgba(0,0,0,0.05);
    }
    footer a { text-align: center; text-decoration: none; color: #333; }

    @media (max-width: 600px) {
      .container { padding: 10px; }
      .card { padding: 15px; }
      input { font-size: 15px; }
      button { font-size: 15px; }
    }
  </style>
</head>
<body>

  <header>üë§ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</header>

  <div class="container">
    <div class="card">
      <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
      <div class="info" id="infoBox"></div>
    </div>

    <div class="card" id="bankCard">
      <h3>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</h3>
      <div class="info" id="bankInfoBox"></div>
    </div>

    <button id="editBtn" onclick="enableEdit()">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    <button id="saveBtn" class="save-btn" style="display:none;" onclick="saveData()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <a href="index.html">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
  </div>

  <footer>
    <a href="index.html">üè†<br>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="news.html">üì∞<br>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</a>
    <a href="transaction.html">üí∞<br>‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</a>
    <a href="account.html" style="color: purple;">üë§<br><b>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</b></a>
  </footer>

  <script>
    const activeCustomer = localStorage.getItem("active_customer");
    if (!activeCustomer) {
      alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
      window.location.href = "login-customer.html";
    }

    const infoBox = document.getElementById("infoBox");
    const bankBox = document.getElementById("bankInfoBox");
    const editBtn = document.getElementById("editBtn");
    const saveBtn = document.getElementById("saveBtn");

    // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    let userKey = `user_info_${activeCustomer}`;
    let bankKey = `bank_info_${activeCustomer}`;

    let userData = JSON.parse(localStorage.getItem(userKey)) || {
      name: "",
      phone: activeCustomer,
      email: ""
    };

    let bankData = JSON.parse(localStorage.getItem(bankKey)) || {
      bankName: "",
      accountNumber: "",
      accountOwner: ""
    };

    // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    function renderData() {
      infoBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠: ${userData.name || "-"}</p>
        <p>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: ${userData.phone || activeCustomer}</p>
        <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•: ${userData.email || "-"}</p>
      `;
      bankBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ${bankData.bankName || "-"}</p>
        <p>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ${bankData.accountNumber || "-"}</p>
        <p>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ${bankData.accountOwner || "-"}</p>
      `;
    }

    renderData();

    // ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
    function enableEdit() {
      infoBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠: <input id="name" value="${userData.name}"></p>
        <p>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: <input id="phone" value="${userData.phone}" disabled></p>
        <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•: <input id="email" value="${userData.email}"></p>
      `;
      bankBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: <input id="bankName" value="${bankData.bankName}"></p>
        <p>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <input id="accountNumber" value="${bankData.accountNumber}"></p>
        <p>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <input id="accountOwner" value="${bankData.accountOwner}"></p>
      `;
      editBtn.style.display = "none";
      saveBtn.style.display = "block";

      // üü° ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
      document.addEventListener("keypress", e => {
        if (e.key === "Enter") saveData();
      });
    }

    // ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    function saveData() {
      userData = {
        name: document.getElementById("name").value.trim(),
        phone: activeCustomer,
        email: document.getElementById("email").value.trim()
      };
      bankData = {
        bankName: document.getElementById("bankName").value.trim(),
        accountNumber: document.getElementById("accountNumber").value.trim(),
        accountOwner: document.getElementById("accountOwner").value.trim()
      };

      // üîπ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå
      localStorage.setItem(userKey, JSON.stringify(userData));
      localStorage.setItem(bankKey, JSON.stringify(bankData));

      alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
      saveBtn.style.display = "none";
      editBtn.style.display = "block";
      renderData();
    }
  </script>

</body>
</html>
