<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
<link rel="icon" href="https://flashexpress.com/favicon.ico" type="image/x-icon">
<title>Flash Express</title>
  <style>
    body {
      font-family: "Prompt", sans-serif;
      background-color: #fffbea;
      text-align: center;
      padding: 30px;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      width: 320px;
      margin: 20px auto;
      padding: 20px;
      text-align: left;
    }
    .card h3 {
      text-align: center;
      color: purple;
    }
    .info p { margin: 8px 0; }
    a, button {
      display: block;
      text-align: center;
      margin: 15px auto;
      text-decoration: none;
      color: purple;
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
    }
    button.save-btn {
      background: #4CAF50;
      color: white;
      border-radius: 8px;
      padding: 8px 16px;
      width: 200px;
    }
    input {
      width: 95%;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 3px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h3>üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
    <div class="info" id="infoBox"></div>
  </div>

  <div class="card" id="bankCard">
    <h3>üè¶ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</h3>
    <div class="info" id="bankInfoBox"></div>
  </div>

  <button id="editBtn" onclick="enableEdit()">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  <button id="saveBtn" class="save-btn" style="display:none;" onclick="saveData()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
  <a href="index.html">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>

  <script>
    const activeCustomer = localStorage.getItem("active_customer");
    if (!activeCustomer) {
      alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
      window.location.href = "login-customer.html";
    }

    const infoBox = document.getElementById("infoBox");
    const bankBox = document.getElementById("bankInfoBox");
    const editBtn = document.getElementById("editBtn");
    const saveBtn = document.getElementById("saveBtn");

    // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    let userKey = `user_info_${activeCustomer}`;
    let bankKey = `bank_info_${activeCustomer}`;

    let userData = JSON.parse(localStorage.getItem(userKey)) || {
      name: "",
      phone: activeCustomer,
      email: ""
    };

    let bankData = JSON.parse(localStorage.getItem(bankKey)) || {
      bankName: "",
      accountNumber: "",
      accountOwner: ""
    };

    // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    function renderData() {
      infoBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠: ${userData.name || "-"}</p>
        <p>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: ${userData.phone || activeCustomer}</p>
        <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•: ${userData.email || "-"}</p>
      `;
      bankBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ${bankData.bankName || "-"}</p>
        <p>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ${bankData.accountNumber || "-"}</p>
        <p>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ${bankData.accountOwner || "-"}</p>
      `;
    }

    renderData();

    // ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
    function enableEdit() {
      infoBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠: <input id="name" value="${userData.name}"></p>
        <p>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: <input id="phone" value="${userData.phone}" disabled></p>
        <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•: <input id="email" value="${userData.email}"></p>
      `;
      bankBox.innerHTML = `
        <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: <input id="bankName" value="${bankData.bankName}"></p>
        <p>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <input id="accountNumber" value="${bankData.accountNumber}"></p>
        <p>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <input id="accountOwner" value="${bankData.accountOwner}"></p>
      `;
      editBtn.style.display = "none";
      saveBtn.style.display = "block";
    }

    // ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    function saveData() {
      userData = {
        name: document.getElementById("name").value.trim(),
        phone: activeCustomer,
        email: document.getElementById("email").value.trim()
      };
      bankData = {
        bankName: document.getElementById("bankName").value.trim(),
        accountNumber: document.getElementById("accountNumber").value.trim(),
        accountOwner: document.getElementById("accountOwner").value.trim()
      };

      // üîπ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå
      localStorage.setItem(userKey, JSON.stringify(userData));
      localStorage.setItem(bankKey, JSON.stringify(bankData));

      alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
      saveBtn.style.display = "none";
      editBtn.style.display = "block";
      renderData();
    }
  </script>

</body>
</html>
