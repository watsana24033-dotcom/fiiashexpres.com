<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://flashexpress.com/favicon.ico" type="image/x-icon">
  <title>‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° | Flash Express</title>

  <style>
    body {
      font-family: "Prompt", sans-serif;
      background-color: #fffbea;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #ffeb3b;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .title {
      font-weight: bold;
      font-size: 20px;
    }

    header span {
      cursor: pointer;
      font-size: 20px;
    }

    header span:hover {
      opacity: 0.7;
    }

    .container {
      margin: 20px auto;
      padding: 20px;
      max-width: 600px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }

    h3 {
      text-align: center;
      color: purple;
      margin-bottom: 10px;
    }

    #customerInfo {
      text-align: center;
      color: #555;
      margin-bottom: 20px;
    }

    .transaction-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .transaction-item {
      background: #fefefe;
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 12px 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .transaction-left {
      flex: 1;
    }

    .transaction-right {
      text-align: right;
      font-weight: bold;
      font-size: 20px;
    }

    .status {
      font-size: 13px;
      font-weight: bold;
      padding: 3px 8px;
      border-radius: 6px;
      display: inline-block;
      color: white;
    }

    .status.success { background: green; }
    .status.pending { background: orange; }
    .status.failed  { background: red; }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      border-top: 1px solid #ddd;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      font-size: 12px;
      box-shadow: 0 -2px 4px rgba(0,0,0,0.05);
    }

    footer a {
      text-align: center;
      text-decoration: none;
      color: #333;
    }

    /* üì± ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    @media (max-width: 600px) {
      .container {
        margin: 10px;
        padding: 15px;
      }
      .transaction-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
      }
      .transaction-right {
        text-align: left;
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <header>
    <span onclick="window.location.href='index.html'">‚¨ÖÔ∏è</span>
    <div class="title">‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</div>
    <div>üí∞</div>
  </header>

  <div class="container">
    <h3>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
    <p id="customerInfo">‡πÄ‡∏ö‡∏≠‡∏£‡πå: -</p>
    <div id="transactionList" class="transaction-list"></div>
  </div>

  <footer>
    <a href="index.html">üè†<br>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="news.html">üì∞<br>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</a>
    <a href="transaction.html" style="color: purple;">üí∞<br><b>‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</b></a>
    <a href="account.html">üë§<br>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</a>
  </footer>

  <script>
    // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
    const activeCustomer = localStorage.getItem("active_customer");
    const container = document.getElementById("transactionList");
    const info = document.getElementById("customerInfo");

    if (!activeCustomer) {
      alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°");
      window.location.href = "login-customer.html";
    } else {
      info.textContent = `‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${activeCustomer}`;
    }

    // ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ
    const key = `transactions_${activeCustomer}`;
    const transactions = JSON.parse(localStorage.getItem(key)) || [];

    if (transactions.length === 0) {
      container.innerHTML = `
        <p style="text-align:center; color:#777;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</p>
      `;
    } else {
      container.innerHTML = transactions.map(t => `
        <div class="transaction-item">
          <div class="transaction-left">
            <div><b>${t.type}</b> ${t.amount.toLocaleString("th-TH", { minimumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó</div>
            <div class="status ${getStatusClass(t.status)}">${t.status}</div>
            <small style="color:#666;">${t.date}</small>
          </div>
          <div class="transaction-right">
            ${t.type === "‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" ? "üí∏" : "üí∞"}
          </div>
        </div>
      `).join("");
    }

    // üü¢ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    function getStatusClass(status) {
      if (status.includes("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£")) return "pending";
      if (status.includes("‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")) return "failed";
      return "success";
    }
  </script>
</body>
</html>
